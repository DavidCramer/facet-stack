jQuery(function(a){a(document).on("click",".facet-stack-section-wrapper > h4",function(){var t=a(this),e=t.find(".facet-stack-section-toggle");t.closest(".facet-stack-wrapper");section=t.closest(".facet-stack-section-wrapper").find(".facet-stack-section"),e.hasClass("dashicons-arrow-up")?(e.removeClass("dashicons-arrow-up").addClass("dashicons-arrow-down"),section.slideUp(100)):(e.removeClass("dashicons-arrow-down").addClass("dashicons-arrow-up"),section.slideDown(100))});var t=function(t){var c=a("#"+t.data("for")),s=t.closest(".facet-stack-section"),n=s.find(".facet-stack-enabled-facets"),o=[];n.find(".facet-stack-facet").each(function(){o.push(a(this).data("facet"))}),e(n),c.length&&c.val(o.join(",")).trigger("change")},e=function(a){a.children().length>1?a.find(".description").slideUp(100):a.find(".description").slideDown(100)},c=function(c){c||(c=a(".facet-stack-facets")),c.sortable({connectWith:".facet-stack-tray",axis:"y",handle:".sortable-item",placeholder:"facet-stack-highlight-placeholder",forcePlaceholderSize:!0,helper:"clone",create:function(t,c){var s=a(this);s.hasClass("facet-stack-enabled-facets")&&e(s)},update:function(a,e){t(e.item)}})};a(document).on("widget-added widget-updated",function(a,t){var e=t.find(".facet-stack-facets");e.length&&c(e)}),c(),a(document).on("change",".facet-stack-section [data-bind]",function(t){t.stopPropagation();a(this)})});